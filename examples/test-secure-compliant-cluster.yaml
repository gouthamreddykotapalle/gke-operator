apiVersion: gke.cattle.io/v1
kind: GKEClusterConfig
metadata:
  name: test-secure-compliant-cluster
  namespace: cattle-global-data
spec:
  clusterAddons:
    horizontalPodAutoscaling: true
    httpLoadBalancing: true
    networkPolicyConfig: true
  clusterName: test-secure-compliant-cluster
  description: "Secure and compliant GKE cluster with proper IP allocation"
  enableKubernetesAlpha: false
  googleCredentialSecret: cattle-global-data:cc-nnb6j
  imported: false
  ipAllocationPolicy:
    clusterSecondaryRangeName: dev52-test-apps-kubeio-argo-rollout-pod-0
    servicesSecondaryRangeName: dev52-test-apps-kubeio-argo-rollout-svc-0
    useIpAliases: true
  kubernetesVersion: 1.32.4-gke.1415000
  labels:
    environment: "test"
  locations:
  - us-central1-a
  loggingService: logging.googleapis.com/kubernetes
  maintenanceWindow: "03:00"
  masterAuthorizedNetworks:
    cidrBlocks:
    - cidrBlock: 10.0.0.0/8
      displayName: "Internal networks"
    - cidrBlock: 172.16.0.0/12
      displayName: "Private networks"
    enabled: true
  monitoringService: monitoring.googleapis.com/kubernetes
  network: projects/pp-d-us-central1-xpn/global/networks/us-central1-test-apps
  networkPolicyEnabled: true
  nodePools:
  - autoscaling:
      enabled: true
      maxNodeCount: 10
      minNodeCount: 1
    config:
      bootDiskKmsKey: projects/pp-d-dev-gce01-kms/locations/us-central1/keyRings/dev-pp-keyring-us-central1/cryptoKeys/dev-pp-vmenc-key-us-central1
      diskSizeGb: 100
      diskType: pd-balanced
      imageType: UBUNTU_CONTAINERD
      machineType: n2d-standard-4
      oauthScopes:
      - https://www.googleapis.com/auth/devstorage.read_only
      - https://www.googleapis.com/auth/logging.write
      - https://www.googleapis.com/auth/monitoring
      - https://www.googleapis.com/auth/servicecontrol
      - https://www.googleapis.com/auth/service.management.readonly
      - https://www.googleapis.com/auth/trace.append
      serviceAccount: lsvc-d-caas-kubeio@dev52-test-apps-kubeio.iam.gserviceaccount.com
      shieldedInstanceConfig:
        enableIntegrityMonitoring: true
        enableSecureBoot: true
    initialNodeCount: 2
    management:
      autoRepair: true
      autoUpgrade: true
    maxPodsConstraint: 32
    name: secure-nodepool
    version: 1.32.4-gke.1415000
  privateClusterConfig:
    enablePrivateEndpoint: false
    enablePrivateNodes: true
    masterIpv4CidrBlock: 10.100.0.0/28
  projectID: dev52-test-apps-kubeio
  shieldedNodes:
    enabled: true
  subnetwork: projects/pp-d-us-central1-xpn/regions/us-central1/subnetworks/dev52-us-central1-test-apps-2
  workloadIdentityConfig:
    workloadPool: dev52-test-apps-kubeio.svc.id.goog
  zone: us-central1-a
